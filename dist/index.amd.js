var S=Object.defineProperty,C=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var w=(l,o,n)=>o in l?S(l,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[o]=n,f=(l,o)=>{for(var n in o||(o={}))j.call(o,n)&&w(l,n,o[n]);if(_)for(var n of _(o))P.call(o,n)&&w(l,n,o[n]);return l},y=(l,o)=>C(l,T(o));var L=(l,o,n)=>new Promise((h,v)=>{var m=e=>{try{r(n.next(e))}catch(t){v(t)}},O=e=>{try{r(n.throw(e))}catch(t){v(t)}},r=e=>e.done?h(e.value):Promise.resolve(e.value).then(m,O);r((n=n.apply(l,o)).next())});define(["exports"],function(l){"use strict";var o=(r=>(r.LOAD="load",r.ERROR="error",r.COMPLETE="complete",r))(o||{});const n=document.head||document.getElementsByTagName("head")[0]||document.body,h="loaded";function v(r,e,t){let i=t.id?document.getElementById(t.id):null;if(!i){const d=`${e}[${e==="link"?"href":"src"}="${r}"]`;i=n.querySelector(d)}return i||(i=document.createElement(e),Object.assign(i,t),n.appendChild(i)),i}const m={LoaderEvent:o,load(r,e={},t={}){const i=e.src||e.href;let d=v(i,r,e);if(d.getAttribute(h)==="1")return Promise.resolve(d);let u;return new Promise((a,s)=>{function c(){a(d)}function E(){s(`Failed to load ${i}`)}d.addEventListener("load",c,!1),d.addEventListener("error",E,!1),u=()=>{var p;d.removeEventListener("load",c,!1),d.removeEventListener("error",E,!1),document.dispatchEvent(new CustomEvent("complete",{detail:d})),(p=t.oncomplete)==null||p.call(t,d)};const g=15*1e3;setTimeout(()=>s(`Time out of ${g}ms`),g)}).then(a=>{var s;return d.setAttribute(h,"1"),document.dispatchEvent(new CustomEvent("load",{detail:d})),(s=t.onload)==null||s.call(t,d),a}).catch(a=>{var s;throw d.remove(),document.dispatchEvent(new CustomEvent("error",{detail:a})),(s=t.onerror)==null||s.call(t,a),new Error(a)}).finally(u)},loadScript(r,e,t){return this.load("script",y(f({},e),{defer:!0,async:!0,type:"text/javascript",crossOrigin:"anonymous",src:r}),t)},loadCss(r,e,t){return this.load("link",y(f({},e),{rel:"stylesheet",type:"text/css",crossOrigin:"anonymous",href:r}),t)},jsonp(r,e){return L(this,null,function*(){const[t,i]=r.split("?"),d=new URLSearchParams(i);d.append(e.name||"jsonCallback",e.callee);const u=Object.create(e.callbacks||{}),a=u.onload;delete u.onload;const s=yield this.loadScript(t+"?"+d.toString(),void 0,u),c=globalThis[e.callee]();return globalThis[e.callee]=null,s.remove(),a==null||a.call(e,c),c})}};m.loadScript("demo.js",void 0,{onload(r){console.log(this),console.log(r)}}),l.LoaderEvent=o,l.default=m,l.yamiLoader=m,Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
